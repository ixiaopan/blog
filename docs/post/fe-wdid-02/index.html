<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>WDID - Frontend Project Structure</title>



  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203640627-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-203640627-1');
  </script>
  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://ixiaopan.github.io/blog/index.xml"
  title=""
/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="WDID - Frontend Project Structure"/>
<meta name="twitter:description" content="本文主要介绍一下当下 general &amp; vue-based 前端项目结构划分"/>




<link rel="stylesheet" href="https://ixiaopan.github.io/blog/fontawesome/css/all.min.css" />




<link
  crossorigin="anonymous"
  href="/blog/css/styles.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


  <link rel="stylesheet" href="https://ixiaopan.github.io/blog/css/main.css" />



<link
  id="dark-mode-theme"
  crossorigin="anonymous"
  href="/blog/css/dark.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>



<script defer crossorigin="anonymous" src="/blog/js/theme.js" integrity=""></script>

<script src="https://ixiaopan.github.io/blog/js/instantpage.min.js" type="module" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css" integrity="sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js" integrity="sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

 



<meta name="generator" content="Hugo 0.81.0" />
  </head>
  <body>
    
  




<header>
  <nav class="navbar">
  <div class="nav">
    
      <a href="https://ixiaopan.github.io/blog/" class="nav-logo">
        <img
          src="https://ixiaopan.github.io/blog/images/me.JPG"
          width="50"
          height="50"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/blog/search" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/about" id="About"
              ><em class="fas fa-user fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/categories" id="Category"
              ><em class="fas fa-folder-open fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>


  
  <div class="intro-header">
    <h1 class="post-heading">
      WDID - Frontend Project Structure
    </h1>
    <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Jun 7, 2023
  
  &nbsp;&nbsp;<i class="fas fa-clock"></i>&nbsp;10 min read

  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a
        href="https://ixiaopan.github.io/blog/categories/frontend/"
        >Frontend</a
      >&nbsp;
    
  
</span>

  </div>
  
</header>

    
  <div class="container" role="main">
    <div class="inner">
      <article class="article" class="blog-post">
        
  <p>本文主要介绍一下当下 <code>general</code> &amp; <code>vue-based</code> 前端项目结构划分</p>
<h2 id="naive">Naive</h2>
<p>The simplest project structure is like this,</p>
<pre><code>test-demo
 - index.html
 - index.js
 - index.css
</code></pre><p>这种形式一般有两种情况： <code>demo</code> or <code>artifacts</code>。</p>
<p>复杂的项目当然不能像这样扁平的堆叠文件，可读性太差，难以维护。如果让我做一个初始化项目的模板，我会从以下几个模块考虑</p>
<h2 id="project-metadata">Project Metadata</h2>
<p>对于一个从未见过的项目，熟悉它最快的方式莫过于浏览一下 <code>README.md/package.json</code></p>
<h3 id="readmemd">README.md</h3>
<p>通常，我会写上项目的名字、描述、开发构建命令。这样，其他人看了 <code>readme.md</code> 就可以立刻启动项目</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md"># 周报定时提醒

<span style="color:#75715e">## Install
</span><span style="color:#75715e"></span>npm i

<span style="color:#75715e">## Dev
</span><span style="color:#75715e"></span>npm run dev

<span style="color:#75715e">## Build
</span><span style="color:#75715e"></span>npm run build
</code></pre></div><h3 id="packagejson">package.json</h3>
<p>相较于 <code>readme.md</code> 像是一本使用手册，<code>package.json</code> 则是对项目元信息的描述。通常，我会更关注</p>
<ul>
<li><code>dependencies</code></li>
<li><code>scripts</code></li>
</ul>
<p>PS：如果是 <code>npm module</code>，我们还得关注 <code>version/exports/main/type</code> 等字段</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;report&#34;</span>,
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;0.0.1&#34;</span>,
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;周报定时提醒&#34;</span>,
  <span style="color:#f92672">&#34;scripts&#34;</span>: {
    <span style="color:#f92672">&#34;dev&#34;</span>: <span style="color:#e6db74">&#34;vite&#34;</span>,
    <span style="color:#f92672">&#34;build&#34;</span>: <span style="color:#e6db74">&#34;vite build&#34;</span>
  },
  <span style="color:#f92672">&#34;dependencies&#34;</span>: {
    <span style="color:#f92672">&#34;vue&#34;</span>: <span style="color:#e6db74">&#34;^3.2.20&#34;</span>
  },
  <span style="color:#f92672">&#34;devDependencies&#34;</span>: {}
}
</code></pre></div><p>此时我们的项目结构如下</p>
<pre><code>- test-demo
 - README.md
 - package.json
</code></pre><h2 id="devbuild">Dev/Build</h2>
<p>接下来，我们要对项目的开发、构建进行技术选型</p>
<h3 id="npmyarnpnpm">npm/yarn/pnpm</h3>
<p>目前主流的3个 <code>package manager</code>，各有优劣，看自己的喜好和项目情况选择即可</p>
<h3 id="vite">vite</h3>
<p>这里我们使用 <code>vue3</code>，所以选择配套的 <code>vite</code> 进行构建。</p>
<p>不同的项目有不同的构建方式，对应的工具也是不同，比如</p>
<ul>
<li><code>react</code> -&gt; <code>webpack</code></li>
<li><code>node module</code> -&gt; <code>esbuild/rollup</code></li>
</ul>
<p>此时我们的项目结构如下</p>
<pre><code>- test-demo
 - README.md
 - package.json
 - vite.config.ts
</code></pre><h2 id="formatter">Formatter</h2>
<p>顾名思义，通过配置一定的规则，实现统一的代码风格和规范，团队合作开发必备。一般需要考虑</p>
<ul>
<li>
<p>代码规范</p>
<ul>
<li><code>eslint/prettier</code></li>
</ul>
</li>
<li>
<p>提交规范</p>
<ul>
<li><code>commitlint</code></li>
<li>gitlab 配置 <code>hooks</code> 等强制校验</li>
</ul>
</li>
<li>
<p>文件命名</p>
<ul>
<li>可开发 <code>vite/webpack</code> 插件 强制检查</li>
</ul>
</li>
<li>
<p>分支命名</p>
<ul>
<li>gitlab 配置 <code>protected branch / hooks</code> 等强制校验</li>
</ul>
</li>
</ul>
<h3 id="ignore">ignore</h3>
<p>最经典的莫过于 <code>.gitignore</code> 了，那些不需要提交的文件都可以写在这里。常见配置如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">.DS_Store
node_modules
dist

<span style="color:#75715e"># Log files</span>
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
</code></pre></div><p>随着其他格式化工具的出现，对应的也会有自己的 <code>ignore</code> 文件，比如下文的 <code>.prettierignore/.eslintignore</code></p>
<h3 id="eslint">eslint</h3>
<h3 id="prettier">prettier</h3>
<h3 id="commitlint">commitlint</h3>
<h3 id="editorconfig">editorconfig</h3>
<p>这个文件用来约束编辑器的配置，比如针对不同文件类型 <code>js/md</code> 的格式化、空格、文件编码(兼容<code>OS</code>)等。常见配置如下</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root <span style="color:#f92672">=</span> true

<span style="color:#f92672">[</span>*<span style="color:#f92672">]</span>
charset <span style="color:#f92672">=</span> utf-8
indent_style <span style="color:#f92672">=</span> space
indent_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
end_of_line <span style="color:#f92672">=</span> lf
insert_final_newline <span style="color:#f92672">=</span> true
trim_trailing_whitespace <span style="color:#f92672">=</span> true
quote_type <span style="color:#f92672">=</span> single
</code></pre></div><p>此时我们的项目结构如下</p>
<pre><code>- test-demo
 - .editorconfig
 - .eslintignore
 - .eslintrc
 - .gitignore
 - .prettierignore
 - .prettierrc
 - commitlint.config.ts
 - README.md
 - package.json
 - vite.config.ts
</code></pre><h2 id="content">Content</h2>
<p>不管用不用框架开发，一些基本的开发模块都是相似的。</p>
<h3 id="pages">pages</h3>
<p>对于前端而言，最主要的就是入口 <code>index.html</code>，在各个框架(<code>react/vue</code>的加持下，现在我们一般去找 <code>views/pages</code> 等文件夹</p>
<p>很早之前，后端渲染的时候，入口的文件大都是 <code>.html</code> 结尾</p>
<pre><code>pages
 - home.html
 - detail.html
 - about.html
</code></pre><p>现在SPA/CSR的时代，入口文件则和框架绑定，以 <code>vue</code> 为例</p>
<pre><code>pages
 - home.vue
 - detail.vue
 - about.vue
</code></pre><p>但是不管什么 <code>suffix</code> ，本质还是 <code>html/js/css</code> 的集合，<code>page</code> 是一切的开始</p>
<h3 id="components">components</h3>
<p>试想把所有内容都放在 <code>pages</code> 下的各个独立页面内，那</p>
<ul>
<li>每个页面都会很大，至少是千行的代码量，可读性差</li>
<li>此外，相同的模块无法共享，存在重复开发，维护性差</li>
</ul>
<p><code>components</code> 就可以解决这些问题</p>
<p>记得第一次学习前端的时候，也是是创建了类似的文件夹 <code>partials</code> ，里面主要存放网站的公共模块，给后端渲染</p>
<pre><code>partials
 - header.html
 - footer.html
 - nav.html
 - sidebar.html
 - carousel.html
</code></pre><p>如上，这些都是经典的功能模块，后端拿到这些模块，就可以自由组合成完整的页面了</p>
<h3 id="enums">enums</h3>
<p>枚举是我很喜欢的一个概念，它既是可变列表，值又有不可变的属性，同时自带表述能力。</p>
<p>试想面对如下的代码，如果没有注释，真的很难理解其意</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">status</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">50001</span>) {

} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">status</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">50002</span>) {

}
</code></pre></div><p>如果我们改写为 <code>enum</code> ，就大不相同</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">STATUS_CODE</span> {
  <span style="color:#a6e22e">TOKEN_INVALID</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">50001</span>,
  <span style="color:#a6e22e">REDIRECT_HOME</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">50002</span>
}
<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">status</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">STATUS_CODE</span>.<span style="color:#a6e22e">TOKEN_INVALID</span>) {

} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">status</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">STATUS_CODE</span>.<span style="color:#a6e22e">REDIRECT_HOME</span>) {

}
</code></pre></div><p>看似很简单，然而在工作中会发现，很多人从来不写 <code>enum</code>，导致项目中一堆不明其意的数字、字符串，只能跟着之前的逻辑继续「添砖加瓦」，导致项目越加难以维护</p>
<h3 id="utils">utils</h3>
<p>前端和浏览器交互是很复杂的，要涉及到浏览器的很多模块，比如 <code>dom/cache/http</code>，这些功能浏览器都有对应的 <code>API</code>，为了更好的维护和扩展，一般我都会每个 <code>API</code> 独立成文件，最后在 <code>index.ts</code> 全部导入</p>
<pre><code>utils
 - dom.ts
 - util.ts
 - cache.ts
 - http.ts
 - index.ts
</code></pre><h3 id="assetspublic">assets/public</h3>
<p>除了代码本身，前端还需要引入一些额外的资源，比如图片、字体、音视频等，一般我们会把他们放在 <code>assets</code></p>
<pre><code>assets
- images
- fonts
- audio
</code></pre><p>有时候，我们也会看到 <code>public</code> 里面也存放一些图片，这两个区别在哪里</p>
<ul>
<li>
<p><code>public</code> 是默认的静态资源公开路径，会原封不动的打包到 <code>dist</code> 下，然后部署到服务器下，所以一般建议</p>
<ul>
<li>
<p>资源不怎么更新的，比如空的兜底图；</p>
</li>
<li>
<p>方便爬虫爬取的 <code>favicon/robots.txt</code></p>
</li>
</ul>
</li>
<li>
<p><code>assets</code> 会在打包构建的时候，根据不同的资源类型进一步处理，比如对于小于 <code>10Kb</code> 的图片，会被编译为 <code>base64</code> 减少请求，大于 <code>10KB</code> 的则在文件名加上 <code>hash</code>，防止缓存失效，一般建议</p>
<ul>
<li>
<p>图片比较小，可能会经常更新的</p>
</li>
<li>
<p>组件自身需要一些图片比如 <code>icon</code> ，建议也打包进来，方便维护；不过如果图片体积过大，还是放在 <code>cdn</code> 比较好</p>
</li>
</ul>
</li>
</ul>
<h3 id="apimock">api/mock</h3>
<p>最后就是和服务端的交互 —— 接口的请求，建议按模块划分，</p>
<ul>
<li>
<p>各个功能模块比如 <code>login/order</code> 各自一个文件，避免耦合，</p>
</li>
<li>
<p>对于公共部分，比如全局的开关配置可以放在 <code>common</code> 里</p>
</li>
</ul>
<pre><code>api
 - login.ts
 - order.ts
 - common
   - index.ts
</code></pre><h2 id="vue-specific">Vue-Specific</h2>
<h3 id="router">router</h3>
<h3 id="store">store</h3>
<h3 id="plugins">plugins</h3>
<h2 id="summary">Summary</h2>
<p>最后的项目结构如下</p>
<pre><code>- test-demo
 - mock
 - public
 - src
   - api
   - assets
   - components
      - header.html
      - footer.html
      - nav.html
      - sidebar.html
      - carousel.html
   - enums
      - cacheEnum.ts
      - httpEnum.ts
   - pages
      - home.vue
      - detail.vue
      - about.vue
   - plugins
   - router
   - store
   - utils
      - dom.ts
      - util.ts
      - cache.ts
      - http.ts
      - index.ts
 - test
 - .editorconfig
 - .eslintignore
 - .eslintrc
 - .gitignore
 - .prettierignore
 - .prettierrc
 - commitlint.config.ts
 - README.md
 - package.json
 - vite.config.ts
</code></pre><p>通篇看下来，看似我们在划分文件，实则我们在拆分功能，每个模块都只有自己唯一的功能，从而实现整个项目的高内聚，低耦合，这也是软件设计的一个原则</p>
<p>此外，通过项目结构的划分，我们也可以看到立项一个项目，需要考虑哪些因素</p>
<p>开发</p>
<ul>
<li>
<p>哪种技术框架 <code>vue/react/koa/nest/...</code></p>
</li>
<li>
<p>是否需要配套的 <code>store/router/middleware/...</code></p>
</li>
</ul>
<p>构建</p>
<ul>
<li>
<p><code>package.json</code> 配置哪些字段</p>
</li>
<li>
<p><code>npm/yarn/pnpm</code> 怎么选择</p>
</li>
<li>
<p><code>webpack/rollup/vite/esbuild/...</code> 用哪一个</p>
</li>
<li>
<p>图片字体等静态资源放在哪里</p>
</li>
</ul>
<p>规范</p>
<ul>
<li>
<p>What 需要什么样的规范（代码、提交、文件、分支）？</p>
</li>
<li>
<p>How 怎么配置 <code>ts/eslint/stylelint/commitlint/prettier</code> 强制约束</p>
</li>
</ul>
<p>然而很多人并不清楚项目结构划分的意义，大都是网上找个模板，能跑起来就行</p>



        
      </article>

      
      <aside class="article-aside">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#naive">Naive</a></li>
    <li><a href="#project-metadata">Project Metadata</a>
      <ul>
        <li><a href="#readmemd">README.md</a></li>
        <li><a href="#packagejson">package.json</a></li>
      </ul>
    </li>
    <li><a href="#devbuild">Dev/Build</a>
      <ul>
        <li><a href="#npmyarnpnpm">npm/yarn/pnpm</a></li>
        <li><a href="#vite">vite</a></li>
      </ul>
    </li>
    <li><a href="#formatter">Formatter</a>
      <ul>
        <li><a href="#ignore">ignore</a></li>
        <li><a href="#eslint">eslint</a></li>
        <li><a href="#prettier">prettier</a></li>
        <li><a href="#commitlint">commitlint</a></li>
        <li><a href="#editorconfig">editorconfig</a></li>
      </ul>
    </li>
    <li><a href="#content">Content</a>
      <ul>
        <li><a href="#pages">pages</a></li>
        <li><a href="#components">components</a></li>
        <li><a href="#enums">enums</a></li>
        <li><a href="#utils">utils</a></li>
        <li><a href="#assetspublic">assets/public</a></li>
        <li><a href="#apimock">api/mock</a></li>
      </ul>
    </li>
    <li><a href="#vue-specific">Vue-Specific</a>
      <ul>
        <li><a href="#router">router</a></li>
        <li><a href="#store">store</a></li>
        <li><a href="#plugins">plugins</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
      
      </aside>
    </div>
    
    
    
    
      

    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="mailto:?to=xiaopan.wpp@outlook.com" name="Email">
        <em class="fas fa-envelope"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://github.com/ixiaopan" name="GitHub">
        <em class="fab fa-github"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://www.linkedin.com/in/ixiaopan" name="Linkedin">
        <em class="fab fa-linkedin"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://space.bilibili.com/22910840" name="Bilibili">
        <em class="fab fa-youtube"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://ixiaopan.github.io/blog/about">ixiaopan</a>
      &nbsp;&copy;
      2023
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
