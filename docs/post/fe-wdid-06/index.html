<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>WDID - The track panel of a video editor</title>



  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203640627-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-203640627-1');
  </script>
  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://ixiaopan.github.io/blog/index.xml"
  title=""
/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="WDID - The track panel of a video editor"/>
<meta name="twitter:description" content="In the previous post, we have learned how to design a video player. In fact, a video player is a container containing many tracks, such as bgm, text, and so on. Can we show and edit these tracks? Of couse, we can. Today, we will introduce the basic UI implmentation of the track panel of a video editor."/>




<link rel="stylesheet" href="https://ixiaopan.github.io/blog/fontawesome/css/all.min.css" />




<link
  crossorigin="anonymous"
  href="/blog/css/styles.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


  <link rel="stylesheet" href="https://ixiaopan.github.io/blog/css/main.css" />



<link
  id="dark-mode-theme"
  crossorigin="anonymous"
  href="/blog/css/dark.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>



<script defer crossorigin="anonymous" src="/blog/js/theme.js" integrity=""></script>

<script src="https://ixiaopan.github.io/blog/js/instantpage.min.js" type="module" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css" integrity="sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js" integrity="sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

 



<meta name="generator" content="Hugo 0.81.0" />
  </head>
  <body>
    
  




<header>
  <nav class="navbar">
  <div class="nav">
    
      <a href="https://ixiaopan.github.io/blog/" class="nav-logo">
        <img
          src="https://ixiaopan.github.io/blog/images/me.JPG"
          width="50"
          height="50"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/blog/search" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/about" id="About"
              ><em class="fas fa-user fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/categories" id="Category"
              ><em class="fas fa-folder-open fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>


  
  <div class="intro-header">
    <h1 class="post-heading">
      WDID - The track panel of a video editor
    </h1>
    <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Jun 26, 2023
  
  &nbsp;&nbsp;<i class="fas fa-clock"></i>&nbsp;2 min read

  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a
        href="https://ixiaopan.github.io/blog/categories/frontend/"
        >Frontend</a
      >&nbsp;
    
  
</span>

  </div>
  
</header>

    
  <div class="container" role="main">
    <div class="inner">
      <article class="article" class="blog-post">
        
  <p>In the previous post, we have learned how to design a video player. In fact, a video player is a container containing many tracks, such as bgm, text, and so on. Can we show and edit these tracks? Of couse, we can. Today, we will introduce the basic UI implmentation of the track panel of a video editor.</p>
<h2 id="comps">Comps</h2>
<p>As shown in the above image, we can see the track panel has three main parts:</p>
<ul>
<li>
<p>timeline(scale + indicator)</p>
<ul>
<li>the container for both zoom and track</li>
</ul>
</li>
<li>
<p>zoom</p>
<ul>
<li>zoom-in and zoom-out, which affects the width of the timeline and the track</li>
<li>the initial reference is called <code>baseWidth</code>, which means how many pixels 1 second hold</li>
<li>When zoom in, <code>baseWidth</code> becomes larger; When zoom out, <code>baseWidth</code> becomes smaller</li>
</ul>
</li>
<li>
<p>track</p>
<ul>
<li>
<p>several types, e.g. <code>bgm/text/tts...</code></p>
</li>
<li>
<p>each track type can have many segments, and segments can overlap. If so, we move down the last segment like down staircases. We use <code>yIndex</code> indicates the index of the segment along the <code>y</code> axis in the same track type. Usually, <code>yIndex</code> is <code>0</code>.</p>
</li>
<li>
<p>each track has its start position defined by offsetX(<code>startTime * baseWidth</code>) and offsetY(<code>yIndex*trackHeight</code>) as well as width decided by <code>duration</code> and <code>baseWidth</code>.</p>
</li>
</ul>
</li>
</ul>
<h2 id="track">Track</h2>
<p>First, different track type has different styles, so we need to define each track type first.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TRACK_TYPE</span> {
  <span style="color:#a6e22e">BGM</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
  <span style="color:#a6e22e">TEXT</span>,
  <span style="color:#a6e22e">TTS</span>,
  <span style="color:#a6e22e">SUBTITLE</span>,
  <span style="color:#a6e22e">VIDEO</span>,
  <span style="color:#a6e22e">CLIP</span>,
}
</code></pre></div><p>Second, each track has its position and width, which is determined by the start time, duration, yIndex and the baseWidth.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">baseWidth</span>

<span style="color:#a6e22e">offsetX</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">startTime</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">baseWidth</span>

<span style="color:#a6e22e">offsetY</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">yIndex</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">someHeight</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#f92672">:</span><span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[&#39;track&#39;, &#39;track-&#39; + type]&#34;</span> <span style="color:#f92672">:style</span><span style="color:#e6db74">=&#34;styleObj&#34;</span> <span style="color:#f92672">:data-scale</span><span style="color:#e6db74">=&#34;baseWidth&#34;</span> <span style="color:#f92672">:data-start</span><span style="color:#e6db74">=&#34;startTime&#34;</span> <span style="color:#f92672">:data-duration</span><span style="color:#e6db74">=&#34;duration&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#f92672">:class</span><span style="color:#e6db74">=&#34;[&#39;track-inner&#39;]&#34;</span>&gt;
      &lt;<span style="color:#f92672">icon</span> /&gt;
      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;track-text&#34;</span>&gt;&lt;<span style="color:#f92672">slot</span> /&gt;&lt;/<span style="color:#f92672">span</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt;
  &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">styleObj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">computed</span>(() =&gt; {
  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">baseWidth</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">duration</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>,
    <span style="color:#a6e22e">transform</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;translate(&#39;</span> <span style="color:#f92672">+</span> (<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">baseWidth</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">startTime</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px,&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">yIndex</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px)&#39;</span>,
  }
})
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">style</span>&gt;
.<span style="color:#a6e22e">track</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bgm</span> {
  <span style="color:#f92672">&amp;:</span><span style="color:#a6e22e">hover</span> .<span style="color:#a6e22e">track</span><span style="color:#f92672">-</span><span style="color:#a6e22e">inner</span> {
    <span style="color:#a6e22e">outline</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span><span style="color:#a6e22e">px</span> <span style="color:#a6e22e">solid</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">f00</span>;
    <span style="color:#a6e22e">outline</span><span style="color:#f92672">-</span><span style="color:#a6e22e">offset</span><span style="color:#f92672">:</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#a6e22e">px</span>;
  }
  <span style="color:#f92672">&amp;:</span><span style="color:#a6e22e">active</span> .<span style="color:#a6e22e">track</span><span style="color:#f92672">-</span><span style="color:#a6e22e">inner</span>,
  <span style="color:#f92672">&amp;</span>.<span style="color:#a6e22e">active</span> .<span style="color:#a6e22e">track</span><span style="color:#f92672">-</span><span style="color:#a6e22e">inner</span> {
    <span style="color:#a6e22e">outline</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span><span style="color:#a6e22e">px</span> <span style="color:#a6e22e">solid</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">f00</span>;
    <span style="color:#a6e22e">outline</span><span style="color:#f92672">-</span><span style="color:#a6e22e">offset</span><span style="color:#f92672">:</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#a6e22e">px</span>;
  }
}
&lt;/<span style="color:#f92672">style</span>&gt;
</code></pre></div><p>The interesting thing here is the use of <code>outline</code>.</p>
<h2 id="zoom">Zoom</h2>
<h2 id="timeline">Timeline</h2>



        
      </article>

      
      <aside class="article-aside">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#comps">Comps</a></li>
    <li><a href="#track">Track</a></li>
    <li><a href="#zoom">Zoom</a></li>
    <li><a href="#timeline">Timeline</a></li>
  </ul>
</nav>
      
      </aside>
    </div>
    
    
    
    
      

    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="mailto:?to=xiaopan.wpp@outlook.com" name="Email">
        <em class="fas fa-envelope"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://github.com/ixiaopan" name="GitHub">
        <em class="fab fa-github"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://www.linkedin.com/in/ixiaopan" name="Linkedin">
        <em class="fab fa-linkedin"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://space.bilibili.com/22910840" name="Bilibili">
        <em class="fab fa-youtube"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://ixiaopan.github.io/blog/about">ixiaopan</a>
      &nbsp;&copy;
      2023
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
