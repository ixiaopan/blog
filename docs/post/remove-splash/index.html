<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>REMOVING ANNOYING SPLASH ADs!!!</title>



  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203640627-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-203640627-1');
  </script>
  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://ixiaopan.github.io/blog/index.xml"
  title=""
/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="REMOVING ANNOYING SPLASH ADs!!!"/>
<meta name="twitter:description" content="What and Why I don&rsquo;t know when it happened, but without a doubt, you will see a statistic or dynamic image on your screen when you launch some APPs nowadays (especially if you are somewhere on the Earth). The picture looks like the figure below with a small button to enable people to skip ads. Generally, the showing time of ads lasts at least 3 seconds. The most disgusting thing is that there is no upper bound for this, so you have to suffer from this unless you don&rsquo;t use any app at all."/>




<link rel="stylesheet" href="https://ixiaopan.github.io/blog/fontawesome/css/all.min.css" />
<link
  id="dark-mode-theme"
  rel="stylesheet"
  href="https://ixiaopan.github.io/blog/css/dark.css"
/>


<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>


<script src="https://ixiaopan.github.io/blog/js/main.bundle.js"></script>
<script src="https://ixiaopan.github.io/blog/js/instantpage.min.js" type="module" defer></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css" integrity="sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js" integrity="sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>

 




  <link rel="stylesheet" href="https://ixiaopan.github.io/blog/css/main.css" />


<meta name="generator" content="Hugo 0.81.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
      <a href="https://ixiaopan.github.io/blog/" class="nav-logo">
        <img
          src="https://ixiaopan.github.io/blog/images/me.JPG"
          width="50"
          height="50"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/blog/about/" id="About"
              ><em class="fas fa-user fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/search" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/blog/archives" id="Archives"
              ><em class="fas fa-archive fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>


    
    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>
              REMOVING ANNOYING SPLASH ADs!!!
            </h1>
          
          
            <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Oct 28, 2021
  
  &nbsp;&nbsp;<i class="fas fa-clock"></i>&nbsp;2 min read

  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a
        href="https://ixiaopan.github.io/blog/categories/utilities/"
        >Utilities</a
      >&nbsp;
    
  
</span>

          
        </div>
      </div>
    </div>
    
  </header>

    
  <div class="container" role="main">
    <div class="inner">
      <article class="article" class="blog-post">
        
  <h2 id="what-and-why">What and Why</h2>
<p>I don&rsquo;t know when it happened, but without a doubt, you will see a statistic or dynamic image on your screen when you launch some APPs nowadays (especially if you are somewhere on the Earth). The picture looks like the figure below with a small button to enable people to skip ads. Generally, the showing time of ads lasts at least 3 seconds. The most disgusting thing is that there is no upper bound for this, so you have to suffer from this unless you don&rsquo;t use any app at all.</p>
<img src="https://static1.keepcdn.com/ark_optimus/2021/10/27/1635333663953ap3s8jls_750x1334.jpg" style="width:30%"/>
<p>Technically speaking, the first page you see when you open an APP is known as the splash page, which originated from the comics industry. In the beginning, they were used as a poster to explain the whole story to readers. Similarly, the purpose of splash pages in mobile applications is to enhance the impression on people.  But now, splash pages are abused as a means of earning advertising profits by commercial companies, getting far away from the original intention.</p>
<h2 id="under-the-hood">Under the hood</h2>
<p>Before getting rid of them, we should know how they are implemented. After several hours hard working, I figured out some key points:</p>
<ul>
<li>images for ads are usually hosted on some special statistic servers</li>
<li>there are specific APIs for advertising data</li>
<li><code>ad/adver/preload/splash...</code> are common words to identify ads</li>
<li>we can control some behaviors of loading ads, such as whether to preload, play in wifi only, duration, etc. by modifying the metadata of ads that returned through APIs</li>
</ul>
<p>Since they are both URIs, we simply reject these requests or response with an empty JSON. With the aid of some proxy tools (Quantumult X), we can rewrite the request as follows,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#f92672">^</span><span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//api\.gotokeep\.com/(op-engine-webapp|ads)/v\d/ads?/preload url reject-dict
</span><span style="color:#75715e"></span><span style="color:#f92672">^</span><span style="color:#a6e22e">https</span><span style="color:#f92672">?:</span><span style="color:#75715e">//api\.gotokeep\.com/op-engine-webapp/v\d/ad url reject-dict
</span><span style="color:#75715e"></span><span style="color:#f92672">^</span><span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//store\.gotokeep\.com/api/v\d/mypage/egg url reject-dict
</span><span style="color:#75715e"></span><span style="color:#f92672">^</span><span style="color:#a6e22e">https</span><span style="color:#f92672">?:</span><span style="color:#75715e">//api\.gotokeep\.com/homepage/v\d/tab url script-response-body Keep.js
</span><span style="color:#75715e"></span><span style="color:#f92672">^</span><span style="color:#a6e22e">https</span><span style="color:#f92672">:</span><span style="color:#75715e">//api\.gotokeep\.com/athena/v\d/people/my url script-response-body Keep.js
</span><span style="color:#75715e"></span>
</code></pre></div><p>Furthermore, we can even modify responses. <code>script-response-body</code> enables us to write javascripts to decide what content to show. It&rsquo;s very useful to filter misc data appearing on the page, such as promotions, egg hunts or ads. For example, I wrote a simple <code>Zhihu.js</code> to change the page mode from mobile to PC and remove the annoying login modal, since you cannot use Zhihu unless you download their app.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// PC version of zhihu: remove login modal and guidance for downloading app
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">body</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$response</span>.<span style="color:#a6e22e">body</span>

<span style="color:#a6e22e">identifier</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&lt;/script&gt;&lt;/head&gt;&#39;</span>
<span style="color:#a6e22e">insert_pos</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">identifier</span>)
<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">insert_post</span><span style="color:#f92672">&gt;-</span><span style="color:#ae81ff">1</span>){
  <span style="color:#a6e22e">work</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;setTimeout(function(){ const openInAppButton = document.querySelector(&#34;.OpenInAppButton&#34;); if (openInAppButton) { openInAppButton.style.display = &#34;none&#34;; } const closeBtn = document.querySelector(&#34;.Modal-closeButton&#34;); if (closeBtn) { closeBtn.click() }; const btns = document.querySelectorAll(&#34;.ModalExp-modalShow .ModalWrap-itemBtn&#34;); if (btns &amp;&amp; btns.length &amp;&amp; btns[1]) { btns[1].click(); }}, 2500)&#39;</span>;
  <span style="color:#a6e22e">body</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">insert_pos</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">work</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#a6e22e">insert_pos</span>)
}
<span style="color:#a6e22e">$done</span>({ <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">body</span> })

</code></pre></div><h2 id="get-free-from-it">Get Free From it</h2>
<p>I have sort out several rules for commonly used APPs — just for personal use  (You can find it on my <a href="https://github.com/ixiaopan/DataScience/tree/master/Utilities/quantumult">Github</a>). Hopefully, it can help you get free from the annoying splash ads.</p>




        
      </article>

      
      <aside class="article-aside">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#what-and-why">What and Why</a></li>
    <li><a href="#under-the-hood">Under the hood</a></li>
    <li><a href="#get-free-from-it">Get Free From it</a></li>
  </ul>
</nav>
      
      </aside>
    </div>
    
    
    
    
      

    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="mailto:?to=xiaopan.wpp@outlook.com" name="Email">
        <em class="fas fa-envelope"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://github.com/ixiaopan" name="GitHub">
        <em class="fab fa-github"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://www.linkedin.com/in/ixiaopan" name="Linkedin">
        <em class="fab fa-linkedin"></em>
      </a>
    
       &nbsp;&nbsp;&nbsp;
      <a href="https://space.bilibili.com/22910840" name="Bilibili">
        <em class="fab fa-youtube"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://ixiaopan.github.io/blog/about">ixiaopan</a>
      &nbsp;&copy;
      2021
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
